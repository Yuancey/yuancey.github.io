
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>demo1-实现京东放大镜效果 | 驿站</title>
    <meta name="author" content="Yuancey" />
    <meta name="description" content="写自己的故事" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://cdn.staticfile.org" />
<script src="https://cdn.staticfile.org/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>






<script src="https://cdn.staticfile.org/waline/2.15.8/waline.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/waline/2.15.8/waline.min.css" />
<link rel="stylesheet" href="https://cdn.staticfile.org/waline/2.15.8/waline-meta.min.css" />




<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>驿站</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;驿站</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>demo1-实现京东放大镜效果</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/1/17
        </span>
        
        <span class="category">
            <a href="/categories/%E5%89%8D%E7%AB%AF/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                前端
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/JS/" style="color: #ff7d73">JS</a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        
  <div id="toc">
      <strong class="sidebar-title">目录</strong>
      
  </div>


        <p>实现京东放大镜效果</p>
<span id="more"></span>

<p>学习内容：</p>
<ul>
<li>实战案例：京东放大镜效果<ul>
<li>1、鼠标移入移出事件：鼠标移入移出控制遮罩层及大图的展示及隐藏</li>
<li>2、鼠标移动<ul>
<li>遮罩层在小盒子中移动 【偏移量】</li>
<li>同时大图也要等比例反方向地移动<ul>
<li>需计算大图的大小</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>实现思路：<br><img src="/Image-2.png" alt="Alt text"></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;style&gt;
        .magnifier &#123;
            margin: 60px auto;
            width: 500px;
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
        &#125;

        .magnifier .abbre &#123;
            position: relative;
            width: 200px;
            height: 200px;
            box-sizing: border-box;
        &#125;

        .magnifier .abbre img &#123;
            width: 100%;
            height: 100%;
        &#125;
        .magnifier .abbre .mark &#123;
            z-index: 10;
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 80px;
            background: rgb(255, 0, 0, .3);
            cursor: move;
        &#125;
        .magnifier .detail &#123;
            display: none;
            position: relative;
            box-sizing: border-box;
            width: 300px;
            height: 300px;
            overflow: hidden;
        &#125;
        .magnifier .detail img &#123;
            position: absolute;
            top: 0;
            left: 0px;
            z-index: 10;
        &#125;
    &lt;/style&gt;
    &lt;script src=&quot;jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;section class=&quot;magnifier&quot;&gt;
        &lt;div class=&quot;abbre&quot;&gt;
            &lt;img src=&quot;./images/1.jpg&quot; alt=&quot;&quot;&gt;
            &lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;detail&quot;&gt;
            &lt;img src=&quot;./images/2.jpg&quot; alt=&quot;&quot;&gt;
        &lt;/div&gt;
    &lt;/section&gt;
    &lt;script&gt;
        // 实现思路
        // 左边盒子：
        // - 小盒子在父盒子里移动（边界） 鼠标在小盒子正中间
        // - 同时大盒子在其父盒子里移动

        $(function() &#123;
            let $magnifier = $(&#39;.magnifier&#39;),
                $abbre = $magnifier.find(&#39;.abbre&#39;),
                $mark = $abbre.find(&#39;.mark&#39;), 
                $detail = $magnifier.find(&#39;.detail&#39;), 
                $detailImg = $detail.find(&#39;img&#39;);
            
            // 动态计算大图的大小
            let abbreW = $abbre.width(),
                abbreH = $abbre.height(),
                abbreOffset = $abbre.offset(),
                markW = $mark.width(),
                markH = $mark.height(),
                detailW = $detail.width(),
                detailH = $detail.height(),
                detailImgW = 0,
                detailImgH = 0;
            detailImgW = detailW / (markW / abbreW);
            detailImgH = detailH / (markH / abbreH);
            $detailImg.css(&#123;
                width: detailImgW,
                height: detailImgH
            &#125;)
            
            //计算mark移动的距离
            const computed = function computed(ev) &#123;
                let curL = ev.pageX - abbreOffset.left - (markW / 2),
                    curT = ev.pageY - abbreOffset.top - (markH / 2);

                //边界处理
                let minL = 0,
                    minT = 0,
                    maxL = abbreW - markW,
                    maxT = abbreW - markH;
                curL = curL &lt; minL? minL: (curL &gt; maxL? maxL: curL),
                curT = curT &lt; minT? minT: (curT &gt; maxT? maxT: curT);
           

                $mark.css(&#123;
                    left: curL,
                    top: curT
                &#125;)

                $detailImg.css(&#123;
                    left: - curL / abbreW * detailImgW,
                    top: - curT / abbreH * detailImgH
                &#125;)
            &#125;

            // 1、鼠标移入，遮罩层及大图展示；鼠标移出，遮罩层及大图不展示
            //jQuery中正规写法 $abbre.on(&#39;click&#39;,function() &#123;&#125;)
            $abbre.mouseenter(function(ev) &#123;
                $mark.css(&#39;display&#39;, &#39;block&#39;)     
                $detail.css(&#39;display&#39;, &#39;block&#39;)
                computed(ev)
            &#125;).mousemove(function(ev) &#123;
                // 2、鼠标移动
                // 2.1 遮罩层在小盒子中移动 【偏移量】
                // 2.2 同时大图也要等比例移动 =&gt; 需要知道大图的大小
                computed(ev)
            &#125;)
            .mouseleave(function (ev) &#123;
                $mark.css(&#39;display&#39;, &#39;none&#39;)
                $detail.css(&#39;display&#39;, &#39;none&#39;)
            &#125;)

            
        &#125;)
        

    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>补充：</p>
<p>获取颜色的rgb值</p>
<p>浏览器中，document.body.style.background &#x3D; ‘red’  &#x2F;&#x2F;‘red’<br>window.getComputedStyle(document.body).background  &#x2F;&#x2F;‘rgb(255, 0, 0) none repeat scroll 0% 0% &#x2F; auto padding-box border-box’</p>

    </div>
    
    
    
    
    
    <div id="comment">
        <div id="waline-container"></div>
    </div>
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 驿站
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;Yuancey
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    


<script>
    Waline.init({
        el: "#waline-container",
        serverURL: "",
        commentCount: false,
        pageview: false,
        emoji: "https://unpkg.com/@waline/emojis@1.2.0/weibo,https://unpkg.com/@waline/emojis@1.2.0/alus,https://unpkg.com/@waline/emojis@1.2.0/bilibili,https://unpkg.com/@waline/emojis@1.2.0/qq,https://unpkg.com/@waline/emojis@1.2.0/tieba,https://unpkg.com/@waline/emojis@1.2.0/tw-emoji".split(","),
        meta: "nick,mail,link".split(","),
        requiredMeta: "nick".split(","),
        lang: "",
        wordLimit: 0,
        pageSize: "10",
        login: "enable",
        
    });
</script>



    
</body>
</html>
